<!DOCTYPE html>
<html>
<head>
  <title>Online Shipping Label Generator</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bwip-js/dist/bwip-js-min.js"></script>
  <style>
    h2 {
      text-align: center;
    }

    #app {
      display: flex;
      flex-direction: column;
      align-items: center;

    }

    .form {
      display: flex;
      flex-direction: column;
      width: 80%;
      border: 1px solid lightgray;
      border-radius: 5px;
    }

    .section {
      padding: 5px 20px;
      width: 100%;
    }

    .barcodes svg {
      max-height: 100px;
    }
  </style>
</head>
<body>
  <div id="app">
    <h2>Online Shipping Label Generator</h2>
    <div class="form">
      <div class="section">
        <h3>Sender:</h3>
        <div>
          <label for="senderName">
            Name: <input id="senderName" type="text"/>
          </label>
        </div>
        <div>
          <label for="senderPhone">
            Phone: <input id="senderPhone" type="text"/>
          </label>
        </div>
        <div>
          <label for="senderAddressLineOne">
            Address Line 1: <input id="senderAddressLineOne" type="text"/>
          </label>
        </div>
        <div>
          <label for="senderAddressLineTwo">
            Address Line 2: <input id="senderAddressLineTwo" type="text"/>
          </label>
        </div>
      </div>
      <div class="section">
        <h3>To:</h3>
        <div>
          <label for="receiverName">
            Name: <input id="receiverName" type="text"/>
          </label>
        </div>
        <div>
          <label for="receiverPhone">
            Phone: <input id="receiverPhone" type="text"/>
          </label>
        </div>
        <div>
          <label for="receiverAddressLineOne">
            Address Line 1: <input id="receiverAddressLineOne" type="text"/>
          </label>
        </div>
        <div>
          <label for="receiverAddressLineTwo">
            Address Line 2: <input id="receiverAddressLineTwo" type="text"/>
          </label>
        </div>
      </div>
      <div class="section">
        <h3>Other:</h3>
        <label for="packageNumber">
          Package Number: <input id="packageNumber" type="text"/>
        </label>
      </div>
      <div class="section">
        <div>
          <button onclick="generate()">Generate</button>
          <button onclick="fillInTemplate()">Fill in template</button>
        </div>
      </div>
    </div>
  </div>
  <div class="barcodes">
    <div id="code128"></div>
    <div id="datamatrix"></div>
  </div>
  <script>
    function generate(){
      let code128SVG = bwipjs.toSVG({
        bcid:        'code128',       // Barcode type
        text:        document.getElementById("packageNumber").value,    // Text to encode
        height:      12,              // Bar height, in millimeters
        includetext: true,            // Show human-readable text
        textxalign:  'center',        // Always good to set this
        textcolor:   '000000',        // Black text
      });
      document.getElementById("code128").innerHTML = code128SVG;
      let text = JSON.stringify(getDataFor2D(),null,0);
      console.log(text);
      let dataMatrixSVG = bwipjs.toSVG({
        bcid:        'qrcode',       // Barcode type
        text:        text,    // Text to encode
      });
      console.log(dataMatrixSVG);
      document.getElementById("datamatrix").innerHTML = dataMatrixSVG;
    }

    function getDataFor2D(){
      let data = {
        "senderName": document.getElementById("senderName").value,
        "receiverName": document.getElementById("receiverName").value,
        "packageNumber": document.getElementById("packageNumber").value
      }
      return data;
    }

    function fillInTemplate(){
      document.getElementById("senderName").value = "Tom Ford";
      document.getElementById("senderPhone").value = "+44-3381-291-918";
      document.getElementById("senderAddressLineOne").value = "536 The Crescent MOTHERWELL";
      document.getElementById("senderAddressLineTwo").value = "ML81 7LR";
      document.getElementById("receiverName").value = "Mark Selby";
      document.getElementById("receiverPhone").value = "+44-3154-235-146";
      document.getElementById("receiverAddressLineOne").value = "41 George Street LERWICK";
      document.getElementById("receiverAddressLineTwo").value = "ZE37 3OM";
      document.getElementById("packageNumber").value = "1234567890";
    }
  </script>
</body>
</html>